<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="tef-button.dev.html">

<polymer-element name="tef-button-group" attributes="toggle single">
    <template>
    	<style>

    	.tef-button-group ::content > * {
		  float: left;
		  margin-left: 1px;
		}
		.tef-button-group ::content > *:first-child::shadow .tef-button {
		  border-radius: 3px 0 0 3px;
		}
		.tef-button-group ::content > *:last-child::shadow .tef-button {
		  border-radius: 0 3px 3px 0;
		}
		.tef-button-group ::content ::shadow .tef-button {
		  border-radius: 0;
		}
		.tef-button-group ::content ::shadow > .tef-button {
		  display: block;
		}
		.tef-button-group ::content ::shadow > .tef-button:first-child {
		  border-radius: 3px 0 0 3px;
		}
		.tef-button-group ::content ::shadow > .tef-button:last-child {
		  border-radius: 0 3px 3px 0;
		}
		.tef-button-group ::content tef-button + tef-button {
		  margin-left: 1px;
		}
    	</style>
	    <link rel="stylesheet" href="bower_components/button-groups/css/button-groups.min.css">

		<ul class="tef-button-group">
			<content></content>
		</ul>
	</template>
	<script>

		Polymer({
			toggle: false,
			single: false,
			selected: null,
			attached: function(){				
				var children = this.children;
				if (this.toggle){
					for (var i = 0; i < children.length; i++){
						var tefButton = children[i];
						var selected = this.selected;
						tefButton.setAttribute("toggle", "");
						if (this.single){
							tefButton.addEventListener("activated",function(){
								if (selected != null){
									selected.removeAttribute("active");
								}
								selected = this;								
							});
							tefButton.addEventListener("deactivated",function(){
								if (selected == this) 
									selected = null;							
							});
						}
					}
				}
			}

		});			
			
	</script>	
</polymer-element>